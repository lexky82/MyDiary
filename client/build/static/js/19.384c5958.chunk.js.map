{"version":3,"sources":["pages/SignUp/styles.tsx","../node_modules/@ant-design/icons-svg/es/asn/UserOutlined.js","../node_modules/@ant-design/icons/es/icons/UserOutlined.js","pages/SignUp/index.tsx"],"names":["Header","styled","header","Container","div","UserOutlined","props","ref","React","AntdIcon","Object","assign","icon","UserOutlinedSvg","displayName","SignUp","history","data","useSWR","fetcher","useState","email","setEmail","name","setName","password","setPassword","passwordCheck","setPasswordCheck","mismatchError","setMismatchError","signUpError","setSignUpError","useEffect","isAuth","openNotification","push","emailCheck","useCallback","test","onChangeEmail","e","target","value","onChangeName","onChangePassword","onChangePasswordCheck","onSubmit","preventDefault","length","dataToSubmit","axios","post","then","resonse","success","catch","err","toString","onSubmitCapture","Item","required","id","placeholder","type","onChange","prefix","MailOutlined","className","LockOutlined","style","minWidth","onClick","to"],"mappings":"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","file":"static/js/19.384c5958.chunk.js","sourcesContent":["import styled from '@emotion/styled';\r\n\r\nexport const Header = styled.header`\r\n  text-align: center;\r\n  font-family: Slack-Larsseit, Helvetica Neue, Helvetica, Segoe UI, Tahoma, Arial, sans-serif;\r\n  font-weight: 700;\r\n  font-size: 2rem;\r\n  line-height: 2.875rem;\r\n  letter-spacing: -0.75px;\r\n  margin-top: 3.125px;\r\n  margin-bottom: 3.125px;\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  max-width : 25rem;\r\n  margin : 10rem auto;\r\n`;","// This icon file is generated automatically.\nvar UserOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\" } }] }, \"name\": \"user\", \"theme\": \"outlined\" };\nexport default UserOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UserOutlinedSvg from \"@ant-design/icons-svg/es/asn/UserOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UserOutlined = function UserOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: UserOutlinedSvg\n  }));\n};\n\nUserOutlined.displayName = 'UserOutlined';\nexport default /*#__PURE__*/React.forwardRef(UserOutlined);","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { Link, RouteChildrenProps } from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport useSWR from \"swr\";\r\nimport fetcher from \"../../utils/fetcher\";\r\n\r\n/* Components */\r\nimport { Container, Header } from \"./styles\";\r\nimport { LockOutlined, MailOutlined, UserOutlined } from \"@ant-design/icons\";\r\nimport { Form, Input, Button } from 'antd';\r\nimport openNotification from \"../../components/Notification\";\r\n\r\ntype props = RouteChildrenProps;\r\n\r\nconst SignUp = ({ history }: props ) => {\r\n  const { data } = useSWR('/api/users/auth', fetcher);\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passwordCheck, setPasswordCheck] = useState('');\r\n  const [mismatchError, setMismatchError] = useState(false);\r\n  const [signUpError, setSignUpError] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (data && data.isAuth) {\r\n      openNotification(\"로그인 성공\", \"로그인 성공하였습니다\", true);\r\n      history.push(\"/\");\r\n    }\r\n  }, [data]);\r\n\r\n  const emailCheck = useCallback(email => {    \r\n    const regex = /([\\w-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([\\w-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$/;\r\n    return (email !== '' && email !== 'undefined' && regex.test(email)); \r\n  }, [])\r\n\r\n  const onChangeEmail = useCallback((e) => {\r\n    setEmail(e.target.value);\r\n  }, [])\r\n\r\n  const onChangeName = useCallback((e) => {\r\n    setName(e.target.value);\r\n  }, [])\r\n\r\n  const onChangePassword = useCallback((e) => {\r\n    setPassword(e.target.value);\r\n    setMismatchError(e.target.value !== passwordCheck)\r\n  }, [passwordCheck])\r\n\r\n  const onChangePasswordCheck = useCallback((e) => {\r\n    setPasswordCheck(e.target.value);\r\n    setMismatchError(e.target.value !== password)\r\n  }, [password])\r\n\r\n  const onSubmit = useCallback((e) => {\r\n    e.preventDefault();\r\n    \r\n    if(!mismatchError && name && emailCheck(email) && !(password.length < 6)){\r\n      setSignUpError('')\r\n\r\n      let dataToSubmit = {\r\n        email: email,\r\n        password: password,\r\n        name: name,\r\n      };\r\n\r\n      axios.post('/api/users/register', dataToSubmit)\r\n      .then((resonse) => {\r\n        if(resonse.data.success){\r\n          openNotification('회원가입 성공' ,'회원가입을 성공하였습니다.', true);\r\n          history.push('/login')\r\n        }\r\n        else {\r\n          openNotification('회원가입 실패', '회원가입에 실패했습니다.', false)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        openNotification('회원가입 오류', err.toString(), false);\r\n      })\r\n    }\r\n  }, [email, emailCheck, mismatchError, name, password])\r\n\r\n  return (\r\n    <Container> \r\n      <Header>회원가입</Header>\r\n      <Form onSubmitCapture={onSubmit}>\r\n        <Form.Item required>\r\n          <Input\r\n            id=\"email\"\r\n            placeholder=\"email\"\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={onChangeEmail}\r\n            prefix={<MailOutlined className=\"site-form-item-icon\" />}\r\n          />\r\n          {!emailCheck(email) && <div>이메일 형식을 입력하세요!</div>}\r\n          </Form.Item>\r\n          \r\n          <Form.Item required>\r\n          <Input\r\n            id=\"name\"\r\n            placeholder=\"닉네임\"\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={onChangeName}\r\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n          />\r\n          {!name && <div>닉네임을 입력해주세요!</div>}\r\n          </Form.Item>\r\n\r\n          <Form.Item required>\r\n          <Input\r\n            id=\"password\"\r\n            placeholder=\"비밀번호\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={onChangePassword}\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n          />\r\n          {password.length < 6 && <div>비밀번호를 6자리 이상</div>}\r\n          </Form.Item>\r\n\r\n          <Form.Item required>\r\n          <Input\r\n            id=\"passwordCheck\"\r\n            placeholder=\"비밀번호 확인\"\r\n            type=\"password\"\r\n            value={passwordCheck}\r\n            onChange={onChangePasswordCheck}\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n          />\r\n          {mismatchError && <div>비밀번호가 일치하지 않습니다.</div>}\r\n          </Form.Item>\r\n\r\n          {signUpError && <div>{signUpError}</div>}\r\n        <Button type=\"primary\" style={{ minWidth: '100%' }} onClick={onSubmit} >\r\n          회원가입\r\n        </Button>\r\n      </Form>\r\n      <div>\r\n        이미 회원이신가요?&nbsp;\r\n        <Link to=\"/login\">로그인 하러가기</Link>\r\n      </div>\r\n    </Container>\r\n  )\r\n  \r\n};\r\n\r\nexport default SignUp"],"sourceRoot":""}